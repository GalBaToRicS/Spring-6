<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" lang="en">

<style>
    :root {
        --bg: #f6f7fb;
        --card: #ffffff;
        --ink: #1d2433;
        --muted: #6b7280;
        --primary: #2563eb;
        --ring: rgba(37, 99, 235, .25);
        --border: #e5e7eb;
        --radius: 16px;
    }
    * { box-sizing: border-box; }
    body {
        margin: 0; padding: 24px; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
        background: radial-gradient(1200px 800px at 10% -10%, #e8efff, transparent), var(--bg);
        color: var(--ink);
    }
    .wrap {
        max-width: 920px; margin: 0 auto; display: grid; grid-template-columns: 280px 1fr; gap: 24px;
    }

    .card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); box-shadow: 0 10px 30px rgba(17, 24, 39, .06); }

    .card.photo { padding: 24px; display: flex; flex-direction: column; align-items: center; justify-content: start; gap: 16px; }
    .avatar {
        width: 180px; height: 180px; border-radius: 50%; overflow: hidden; border: 6px solid #fff; box-shadow: 0 6px 20px rgba(0,0,0,.08);
        background: #eef2ff; display: grid; place-items: center;
    }
    .avatar img { width: 100%; height: 100%; object-fit: cover; display: block; }
    .card.form { padding: 24px; }
    .title { margin: 0 0 16px; font-size: 20px; font-weight: 700; }
    .grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 16px; }
    .row { display: grid; gap: 6px; }
    label { font-size: 13px; color: var(--muted); }
    .data-label {
        padding: 8px 12px;
        border: 1px solid var(--border);
        border-radius: 4px;
        font-size: 14px;
        width: 100%;
    }
    .actions { display: flex; gap: 12px; margin-top: 20px; }

    .roles { display: flex; flex-direction: column; gap: 6px; margin-top: 6px; }
    .roles label { display: flex; align-items: center; gap: 8px; font-size: 14px; color: var(--ink); }

    .btn {
        appearance: none; border: 1px solid var(--border); background: #fff; color: var(--ink); padding: 12px 16px; border-radius: 12px; cursor: pointer; font-weight: 600; transition: transform .06s ease, box-shadow .2s, background .2s, border-color .2s;
    }
    .btn:active { transform: translateY(1px); }
    .btn.primary { background: var(--primary); color: #fff; border-color: var(--primary); }
    .btn.ghost { background: #fff; }
    .logout-btn {
        position: absolute;
        top: 20px;
        right: 20px;
        background-color: #f44336;
        color: white;
        border: none;
        padding: 8px 14px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
    }
    .logout-btn:hover { background-color: #d32f2f; }
    @media (max-width: 820px) {
        .wrap { grid-template-columns: 1fr; }
        .avatar { width: 140px; height: 140px; }
        .grid { grid-template-columns: 1fr; }
    }
</style>
<head>
    <title th:text="${user.firstName + ' ' + user.lastName}">Редактирование пользователя</title>
    <meta charset="UTF-8">
</head>
<body>
<form th:action="@{/logout}" method="post">
    <button type="submit" class="logout-btn">Выход</button>
</form>

<div class="wrap">
    <aside class="card photo">
        <div class="avatar" aria-label="Стандартная фотография профиля">
            <img alt="Аватар по умолчанию" src="data:image/svg+xml;utf8,
        <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 256 256'>
          <defs>
            <linearGradient id='g' x1='0' x2='1' y1='0' y2='1'>
              <stop offset='0' stop-color='%23c7d2fe'/>
              <stop offset='1' stop-color='%2393c5fd'/>
            </linearGradient>
          </defs>
          <rect width='256' height='256' fill='url(%23g)'/>
          <circle cx='128' cy='92' r='52' fill='white' fill-opacity='.95'/>
          <path d='M32 226c0-44 43-74 96-74s96 30 96 74' fill='white' fill-opacity='.95'/>
        </svg>"/>
        </div>
    </aside>

    <main class="card form">
        <h1 class="title">Редактирование пользователя</h1>

        <form th:action="@{/admin/{id}(id=${user.id})}" method="post" th:object="${user}">
            <input type="hidden" name="_method" value="patch" />
            <input type="hidden" th:field="*{id}" />

            <div class="grid">
                <div class="row">
                    <label>ID</label>
                    <div class="data-label" style="background: #f0f0f0;" th:text="${user.id}">1001</div>
                </div>
                <div class="row">
                    <label for="email">Email</label>
                    <input id="email" class="data-label" th:field="*{email}" required>
                </div>
                <div class="row">
                    <label for="firstName">Имя</label>
                    <input id="firstName" class="data-label" th:field="*{firstName}" required>
                </div>
                <div class="row">
                    <label for="lastName">Фамилия</label>
                    <input id="lastName" class="data-label" th:field="*{lastName}" required>
                </div>
                <div class="row">
                    <label for="birthDay">Дата рождения</label>
                    <input id="birthDay" class="data-label" name="birthDay" type="date"
                           th:value="${user.birthDay != null} ? ${#temporals.format(user.birthDay, 'yyyy-MM-dd')} : ''"
                           placeholder="дд.мм.гггг">
                </div>
                <div class="row">
                    <label for="password">Новый пароль (не обязательно)</label>
                    <input id="password" class="data-label" name="password" type="password"
                           placeholder="Введите новый пароль, если хотите изменить"
                           th:value="${null}">
                    <small style="color: #666; font-size: 12px;">
                        Оставьте пустым, чтобы оставить текущий пароль
                    </small>
                </div>
            </div>

            <div class="roles">
                <label>
                    <input type="checkbox" name="roles" value="ROLE_USER"
                           th:checked="${user.roles.![name].contains('ROLE_USER')}" />
                    Пользователь
                </label>
                <label>
                    <input type="checkbox" name="roles" value="ROLE_ADMIN"
                           th:checked="${user.roles.![name].contains('ROLE_ADMIN')}" />
                    Администратор
                </label>
            </div>

            <div class="actions">
                <button class="btn primary" type="submit">Сохранить изменения</button>
                <a class="btn ghost" th:href="@{/admin/{id}(id=${user.id})}">Отмена</a>
            </div>
        </form>
    </main>
</div>
</body>
</html>